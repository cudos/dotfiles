---
- hosts: localhost
  tasks:
  - name: update apt cache
    apt:
      update_cache: yes
    become: true
  - name: install emacs25
    apt:
      name: emacs25
    become: true
  - name: install clojure
    apt:
      name: clojure
    become: true
  - name: install virtualenvwrapper
    apt:
      name: virtualenvwrapper
    become: true
  - name: install ack
    apt:
      name: ack
    become: true
  - name: install terminator
    apt:
      name: terminator
    become: true
  - name: install byobu
    apt:
      name: byobu
    become: true
  - name: install dstat
    apt:
      name: dstat
    become: true
#  - name: clone git repository cudos/dotfiles
#    git:
#      repo: git@github.com:cudos/dotfiles.git
#      version: master
#      dest: ~/git/cudos/dotfiles
  - name: clone git repository cudos/pe-clojure
    git:
      repo: git@github.com:cudos/pe-clojure.git
      version: master
      dest: ~/git/cudos/pe-clojure
  - name: clone git repository cudos/readme
    git:
      repo: git@github.com:cudos/readme.git
      version: master
      dest: ~/git/cudos/readme
  - name: clone git repository cudos/emacs.d
    git:
      repo: git@github.com:cudos/emacs.d.git
      version: master
      dest: ~/git/cudos/emacs.d
  - name: clone git repository cudos/trender
    git:
      repo: git@github.com:cudos/trender.git
      version: master
      dest: ~/git/cudos/trender
  - name: clone git repository clojure/clojure
    git:
      repo: https://github.com/clojure/clojure.git
      version: master
      dest: ~/git/clojure
  - name: clone git repository technomancy/leiningen
    git:
      repo: https://github.com/technomancy/leiningen.git
      version: stable
      dest: ~/git/leiningen
  - name: remove eventually existing ~/.emacs.d
    file:
      path: ~/.emacs.d
      state: absent
  - name: set symbolic link ~/git/cudos/emacs.d/bookmarks
    file:
      src: ~/Dropbox/emacs-bookmarks
      dest: ~/git/cudos/emacs.d/bookmarks
      state: link
  - name: set symbolic link ~/git/cudos/emacs.d/projectile-bookmarks.eld
    file:
      src: ~/Dropbox/emacs-projectile-bookmarks.eld
      dest: ~/git/cudos/emacs.d/projectile-bookmarks.eld
      state: link
  - name: set symbolic link ~/.emacs.d
    file:
      src: ~/git/cudos/emacs.d
      dest: ~/.emacs.d
      state: link
  - name: remove eventually existing ~/.bashrc
    file:
      path: ~/.bashrc
      state: absent
  - name: set symbolic link ~/.bashrc
    file:
      src: ~/git/cudos/dotfiles/.bashrc
      dest: ~/.bashrc
      state: link
  - name: remove eventually existing ~/.config/terminator/config
    file:
      path: ~/.config/terminator/config
      state: absent
  - name: set symbolic link ~/.config/terminator/config
    file:
      src: ~/git/cudos/dotfiles/terminator-config
      dest: ~/.config/terminator/config
      state: link
  - name: copy lein script
    shell: cp ~/git/leiningen/bin/lein ~/bin/
    args:
      creates: ~/bin/lein
  - name: initially run lein
    shell: ~/bin/lein
    args:
      creates: ~/.lein
